<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9. Interfaces to psi4 and pyscf &mdash; CheMPS2 1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CheMPS2 1.5 documentation" href="index.html" />
    <link rel="prev" title="8. DMRG-SCF calculations" href="dmrgscfcalcs.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dmrgscfcalcs.html" title="8. DMRG-SCF calculations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CheMPS2 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="index-0"></span><span class="target" id="index-1"></span><div class="section" id="interfaces-to-psi4-and-pyscf">
<span id="index-2"></span><h1>9. Interfaces to psi4 and pyscf<a class="headerlink" href="#interfaces-to-psi4-and-pyscf" title="Permalink to this headline">¶</a></h1>
<p>CheMPS2 is currently interfaced with two ab initio quantum chemistry packages:</p>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">dmrgci</span></code> and <code class="docutils literal"><span class="pre">dmrgscf</span></code> plugins to <a class="reference external" href="http://www.psicode.org/">psi4</a> allow to perform DMRG-CI and DMRG-SCF calculations with CheMPS2, by using <a class="reference external" href="http://www.psicode.org/">psi4</a> input files. Since April 2015, CheMPS2 is also an integral part of psi4.</li>
<li>There are also DMRG-CI and DMRG-SCF interfaces between <a class="reference external" href="http://sunqm.github.io/pyscf/">pyscf</a> and CheMPS2.</li>
</ol>
<div class="section" id="psi4-dmrgci-plugin">
<h2>9.1. psi4 <code class="docutils literal"><span class="pre">dmrgci</span></code> plugin<a class="headerlink" href="#psi4-dmrgci-plugin" title="Permalink to this headline">¶</a></h2>
<p>DMRG-CI calculations can be performed directly with <a class="reference external" href="http://www.psicode.org/">psi4</a>. The plugin has been tested on commit <code class="docutils literal"><span class="pre">14c78eabdca86f8e094576890518d93d300d2500</span></code> (February 27, 2015) on <a class="reference external" href="https://github.com/psi4/psi4public">https://github.com/psi4/psi4public</a>, and should work on later versions as well.</p>
<p>To perform DMRG-CI calculations, build <a class="reference external" href="http://www.psicode.org/">psi4</a> with the plugin option, and then run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /mypsi4plugins
<span class="nv">$ </span>psi4 --new-plugin dmrgci
<span class="nv">$ </span><span class="nb">cd </span>dmrgci
</pre></div>
</div>
<p>Now, replace the file <code class="docutils literal"><span class="pre">dmrgci.cc</span></code> with <code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/psi4plugins/dmrgci.cc</span></code>. To compile the plugin, the Makefile should be adjusted. Change the line</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">PSIPLUGIN</span> <span class="o">=</span> -L<span class="k">$(</span>OBJDIR<span class="k">)</span>/lib -lplugin
</pre></div>
</div>
<p>to</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">PSIPLUGIN</span> <span class="o">=</span> -L<span class="k">$(</span>OBJDIR<span class="k">)</span>/lib -lplugin -lchemps2
</pre></div>
</div>
<p>Remember to add the library and include paths to the Makefile as well, if <code class="docutils literal"><span class="pre">libchemps2</span></code> is not installed in a standard location.
To compile the plugin, run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make
</pre></div>
</div>
<p>An example input file to use the <code class="docutils literal"><span class="pre">dmrgci</span></code> plugin:</p>
<div class="highlight-python"><div class="highlight"><pre>molecule H2O {
 0 1
   O   0.000000000   0.00   0.000000000
   H   0.790689766   0.00   0.612217330
   H  -0.790689766   0.00   0.612217330
 units angstrom
}

plugin_load(&quot;dmrgci/dmrgci.so&quot;)

set basis          cc-pVDZ
set reference      rhf
set e_convergence  1e-13
set d_convergence  1e-13
set ints_tolerance 0.0

set dmrgci wfn_irrep            0
set dmrgci wfn_multp            1
set dmrgci frozen_docc          [ 1 , 0 , 0 , 0 ]
set dmrgci active               [ 5 , 0 , 4 , 2 ]
set dmrgci dmrg_states          [  200,  500, 1000, 1000 ]
set dmrgci dmrg_econv           [ 1e-8, 1e-8, 1e-8, 1e-8 ]
set dmrgci dmrg_maxsweeps       [    5,    5,    5,  100 ]
set dmrgci dmrg_noiseprefactors [ 0.03, 0.03, 0.03,  0.0 ]
set dmrgci dmrg_print_corr      false
set dmrgci mps_chkpt            false

scf()

plugin(&quot;dmrgci.so&quot;)
</pre></div>
</div>
<p>This file (<code class="docutils literal"><span class="pre">H2O.dmrgci.in</span></code>) should be placed in the folder <code class="docutils literal"><span class="pre">/mypsi4plugins</span></code>. The DMRG-CI calculation can then be started with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /mypsi4plugins
<span class="nv">$ </span>psi4 H2O.dmrgci.in H2O.dmrgci.out
</pre></div>
</div>
<p>Since April 2015, CheMPS2 is also an integral part of <a class="reference external" href="http://www.psicode.org/">psi4</a>. Please consult <a class="reference external" href="http://www.psicode.org/">psi4</a>&#8216;s documentation on how to run DMRG-CI calculations with <a class="reference external" href="http://www.psicode.org/">psi4</a>.</p>
</div>
<div class="section" id="psi4-dmrgscf-plugin">
<h2>9.2. psi4 <code class="docutils literal"><span class="pre">dmrgscf</span></code> plugin<a class="headerlink" href="#psi4-dmrgscf-plugin" title="Permalink to this headline">¶</a></h2>
<p>DMRG-SCF calculations can be performed directly with <a class="reference external" href="http://www.psicode.org/">psi4</a>. The plugin has been tested on commit <code class="docutils literal"><span class="pre">14c78eabdca86f8e094576890518d93d300d2500</span></code> (February 27, 2015) on <a class="reference external" href="https://github.com/psi4/psi4public">https://github.com/psi4/psi4public</a>, and should work on later versions as well.</p>
<p>To perform DMRG-SCF calculations, build <a class="reference external" href="http://www.psicode.org/">psi4</a> with the plugin option, and then run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /mypsi4plugins
<span class="nv">$ </span>psi4 --new-plugin dmrgscf
<span class="nv">$ </span><span class="nb">cd </span>dmrgscf
</pre></div>
</div>
<p>Now, replace the file <code class="docutils literal"><span class="pre">dmrgscf.cc</span></code> with <code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/psi4plugins/dmrgscf.cc</span></code>. To compile the plugin, the Makefile should be adjusted. Change the line</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">PSIPLUGIN</span> <span class="o">=</span> -L<span class="k">$(</span>OBJDIR<span class="k">)</span>/lib -lplugin
</pre></div>
</div>
<p>to</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">PSIPLUGIN</span> <span class="o">=</span> -L<span class="k">$(</span>OBJDIR<span class="k">)</span>/lib -lplugin -lchemps2
</pre></div>
</div>
<p>Remember to add the library and include paths to the Makefile as well, if <code class="docutils literal"><span class="pre">libchemps2</span></code> is not installed in a standard location.
To compile the plugin, run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make
</pre></div>
</div>
<p>An example input file to use the <code class="docutils literal"><span class="pre">dmrgscf</span></code> plugin:</p>
<div class="highlight-python"><div class="highlight"><pre>molecule O2 {
  O       0.0   0.0   0.0
  O       0.0   0.0   3.0 
units au
}

plugin_load(&quot;dmrgscf/dmrgscf.so&quot;)

set basis     cc-pVDZ
set reference rhf

set dmrgscf wfn_irrep            0
set dmrgscf wfn_multp            1
set dmrgscf frozen_docc          [ 1 , 0 , 0 , 0 , 0 , 1 , 0 , 0 ]
set dmrgscf active               [ 2 , 0 , 2 , 2 , 0 , 2 , 2 , 2 ]

set dmrgscf dmrg_states          [   500,  1000,  1000 ]
set dmrgscf dmrg_econv           [ 1e-10, 1e-10, 1e-10 ]
set dmrgscf dmrg_maxsweeps       [     5,     5,    10 ]
set dmrgscf dmrg_noiseprefactors [  0.05,  0.05,   0.0 ]
set dmrgscf dmrg_print_corr      false
set dmrgscf mps_chkpt            false

set dmrgscf dmrgscf_convergence  1e-6
set dmrgscf dmrgscf_store_unit   true
set dmrgscf dmrgscf_do_diis      true
set dmrgscf dmrgscf_diis_branch  1e-2
set dmrgscf dmrgscf_store_diis   true

set dmrgscf dmrgscf_which_root   2   # First excited state
set dmrgscf dmrgscf_state_avg    true
set dmrgscf dmrgscf_active_space NO  # INPUT; NO; LOC
set dmrgscf dmrgscf_loc_random   false

scf()

plugin(&quot;dmrgscf.so&quot;)
</pre></div>
</div>
<p>This file (<code class="docutils literal"><span class="pre">O2.dmrgscf.in</span></code>) should be placed in the folder <code class="docutils literal"><span class="pre">/mypsi4plugins</span></code>. The DMRG-CI calculation can then be started with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /mypsi4plugins
<span class="nv">$ </span>psi4 O2.dmrgscf.in O2.dmrgscf.out
</pre></div>
</div>
<p>Since April 2015, CheMPS2 is also an integral part of <a class="reference external" href="http://www.psicode.org/">psi4</a>. Please consult <a class="reference external" href="http://www.psicode.org/">psi4</a>&#8216;s documentation on how to run DMRG-SCF calculations with <a class="reference external" href="http://www.psicode.org/">psi4</a>.</p>
</div>
<div class="section" id="id12">
<h2>9.3. pyscf<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://sunqm.github.io/pyscf/">pyscf</a> is a new quantum chemistry package, in which all layers are written or interfaced in python. In the future, the package will be able to perform DMRG-CI and DMRG-SCF calculations using PyCheMPS2: <a class="reference external" href="https://github.com/sunqm/pyscf/blob/master/future/dmrgscf/chemps2.py">chemps2.py</a>.</p>
<p>Examples of how to extract MO integrals from <a class="reference external" href="http://sunqm.github.io/pyscf/">pyscf</a> to perform DMRG-CI calculations with PyCheMPS2 can be found in:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/pyscf/example.py</span></code></li>
<li><code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/pyscf/example2.py</span></code></li>
<li><code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/pyscf/example3.py</span></code></li>
<li><code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/pyscf/dmrgci.py</span></code></li>
<li><code class="docutils literal"><span class="pre">/myfolder/chemps2/integrals/pyscf/call_chemps2.py</span></code></li>
</ol>
<p>Please remember to append the correct pyscf and PyCheMPS2 directories to <code class="docutils literal"><span class="pre">sys.path</span></code> at the top of these files.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">9. Interfaces to psi4 and pyscf</a><ul>
<li><a class="reference internal" href="#psi4-dmrgci-plugin">9.1. psi4 <code class="docutils literal"><span class="pre">dmrgci</span></code> plugin</a></li>
<li><a class="reference internal" href="#psi4-dmrgscf-plugin">9.2. psi4 <code class="docutils literal"><span class="pre">dmrgscf</span></code> plugin</a></li>
<li><a class="reference internal" href="#id12">9.3. pyscf</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dmrgscfcalcs.html"
                        title="previous chapter">8. DMRG-SCF calculations</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/interfaces.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dmrgscfcalcs.html" title="8. DMRG-SCF calculations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CheMPS2 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013-2015, Sebastian Wouters.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>